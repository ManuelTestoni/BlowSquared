{% load static %}
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}BlowSquared{% endblock %}</title>
  
  <!-- Favicon per risolvere l'errore 404 -->
  <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
  <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/style.css' %}?v=1.2">
  <link rel="stylesheet" href="{% static 'css/home.css' %}?v=1.2">
  <link rel="stylesheet" href="{% static 'css/prodotti.css' %}?v=1.2">
  {% block extra_css %}{% endblock %}
</head>
<body>
  <!-- Theater Loader - SOLO PER LA HOME -->
  {% if request.resolver_match.url_name == 'home' and request.resolver_match.app_name == None %}
  <link rel="stylesheet" href="{% static 'css/loader.css' %}?v=1.2">
  <div id="page-loader" class="page-loader">
    <div class="stage">
      <div class="stage-lights"></div>
      
      <div class="curtain-container">
        <div class="curtain-rod"></div>
        <div class="curtain-left"></div>
        <div class="curtain-right"></div>
        <div class="tieback-left"></div>
        <div class="tieback-right"></div>
      </div>
      
      <div class="pre-show">
        <h1 class="show-title">BlowÂ²</h1>
        <p class="show-subtitle">Benvenuti nel nostro supermercato digitale</p>
        
        <div class="loading-animation">
          <div class="theater-dots">
            <div class="theater-dot"></div>
            <div class="theater-dot"></div>
            <div class="theater-dot"></div>
          </div>
        </div>
        
        <div class="audio-controls">
          <button id="audio-toggle" class="audio-btn" aria-label="Attiva/Disattiva audio">
            ðŸŽµ
          </button>
        </div>
      </div>
      
      <div class="curtain-progress">
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
        <span class="progress-text">0%</span>
      </div>
    </div>
  </div>

  <!-- Audio Safari-friendly -->
  <audio id="loading-audio" preload="metadata" muted="false" controls style="display: none; opacity: 0;">
    <source src="{% static 'audio/loading.mp3' %}" type="audio/mpeg">
    <source src="{% static 'audio/loading.ogg' %}" type="audio/ogg">
    Il tuo browser non supporta l'elemento audio.
  </audio>
  {% endif %}

  <!-- Header/Navbar -->
  {% include 'includes/navbar.html' %}

  <!-- Main Content -->
  <main>
    {% block content %}{% endblock %}
  </main>
  
  <!-- Footer -->
  {% include 'includes/footer.html' %}

  <!-- JavaScript globale -->
  <script src="{% static 'js/main.js' %}"></script>
  
  {% block extra_js %}{% endblock %}
</body>
</html>

<style>
/* Hamburger icon style */
.hamburger-icon {
  font-size: 1.3em;
  margin-right: 0.3em;
  vertical-align: middle;
}

/* Dropdown styles */
.accesso-dropdown {
  position: relative;
}

.accesso-dropdown .dropdown-menu {
  display: none;
  position: absolute;
  right: 0;
  top: 100%;
  min-width: 180px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(44,62,80,0.08);
  z-index: 100;
  padding: 0.5rem 0;
}

.accesso-dropdown:hover .dropdown-menu,
.accesso-dropdown:focus-within .dropdown-menu {
  display: block;
}

.accesso-dropdown .dropdown-item {
  padding: 0.7rem 1.2rem;
  color: #2c3e50;
  text-decoration: none;
  transition: background 0.2s;
  font-weight: 500;
}

.accesso-dropdown .dropdown-item:hover {
  background: #f1f3f6;
  color: #1769aa;
}
</style>